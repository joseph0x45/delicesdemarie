<body class="bg-stone-50">

    <script>
        // Products Data (same as index.html)
        const products = [
            // Épices Douces
            { name: 'Cannelle de Ceylan', category: 'douces', price: '8.90€', image: 'https://images.unsplash.com/photo-1608797178974-15b35a64ede9?w=400&h=400&fit=crop', description: 'Cannelle douce et aromatique du Sri Lanka', longDescription: 'La cannelle de Ceylan, également connue sous le nom de vraie cannelle, provient du Sri Lanka. Elle est réputée pour sa saveur douce et délicate, avec des notes subtiles de citron. Parfaite pour vos pâtisseries, boissons chaudes et plats sucrés.', origin: 'Sri Lanka', weight: '50g' },
            { name: 'Vanille de Madagascar', category: 'douces', price: '12.90€', image: 'https://images.unsplash.com/photo-1611686530796-3800f93b0c1e?w=400&h=400&fit=crop', description: 'Gousses de vanille bourbon premium', longDescription: 'Nos gousses de vanille bourbon de Madagascar sont soigneusement sélectionnées pour leur qualité exceptionnelle. Riches et crémeuses, elles apportent une profondeur aromatique incomparable à vos desserts et préparations culinaires.', origin: 'Madagascar', weight: '2 gousses' },
            { name: 'Cardamome Verte', category: 'douces', price: '9.90€', image: 'https://images.unsplash.com/photo-1596040033229-a0b3b6087c3e?w=400&h=400&fit=crop', description: 'Cardamome fraîche aux notes citronnées', longDescription: 'La cardamome verte offre un parfum intense et des notes citronnées rafraîchissantes. Idéale pour parfumer vos thés, cafés, currys et desserts orientaux. Une épice polyvalente qui éveille les sens.', origin: 'Inde', weight: '40g' },
            { name: 'Noix de Muscade', category: 'douces', price: '7.50€', image: 'https://images.unsplash.com/photo-1599639957043-f3aa5c986398?w=400&h=400&fit=crop', description: 'Noix de muscade entière parfumée', longDescription: 'Noix de muscade entière au parfum chaud et légèrement sucré. À râper fraîchement pour un maximum de saveur dans vos gratins, purées, béchamels et desserts.', origin: 'Indonésie', weight: '30g' },

            // Épices Piquantes
            { name: 'Piment d\'Espelette', category: 'piquantes', price: '11.90€', image: 'https://images.unsplash.com/photo-1583623025817-d180a2221d0a?w=400&h=400&fit=crop', description: 'Piment doux du Pays Basque AOP', longDescription: 'Le piment d\'Espelette AOP est cultivé et séché au Pays Basque selon des méthodes traditionnelles. Il offre une saveur fruitée avec une chaleur modérée, parfait pour relever tous vos plats.', origin: 'France (Pays Basque)', weight: '50g' },
            { name: 'Poivre de Sichuan', category: 'piquantes', price: '10.50€', image: 'https://images.unsplash.com/photo-1599639935724-f7c2c7733e4d?w=400&h=400&fit=crop', description: 'Poivre citronné aux notes anesthésiantes', longDescription: 'Ce poivre unique offre une sensation de picotement caractéristique avec des notes citronnées. Incontournable de la cuisine chinoise, il sublime les plats de viandes et de légumes.', origin: 'Chine', weight: '40g' },
            { name: 'Piment Bird\'s Eye', category: 'piquantes', price: '8.90€', image: 'https://images.unsplash.com/photo-1551058546-2bd3e3e0ed55?w=400&h=400&fit=crop', description: 'Petit piment thaï très piquant', longDescription: 'Petit mais puissant, le piment Bird\'s Eye apporte une chaleur intense à vos plats asiatiques. À utiliser avec parcimonie pour un résultat explosif.', origin: 'Thaïlande', weight: '30g' },
            { name: 'Poivre Noir de Malabar', category: 'piquantes', price: '7.90€', image: 'https://images.unsplash.com/photo-1599639935724-f7c2c7733e4d?w=400&h=400&fit=crop', description: 'Poivre noir intense et parfumé', longDescription: 'Poivre noir de haute qualité de la côte de Malabar en Inde. Grains entiers au parfum intense et à la saveur complexe. Idéal à moudre fraîchement.', origin: 'Inde (Malabar)', weight: '60g' },

            // Mélanges
            { name: 'Curry Madras', category: 'melanges', price: '6.90€', image: 'https://images.unsplash.com/photo-1596040033229-a0b3b6087c3e?w=400&h=400&fit=crop', description: 'Mélange d\'épices indien parfumé', longDescription: 'Mélange équilibré de curcuma, coriandre, cumin, fenugrec et piments. Parfait pour vos currys de légumes, viandes ou fruits de mer. Saveur authentique de l\'Inde du Sud.', origin: 'Inde', weight: '70g' },
            { name: 'Ras el Hanout', category: 'melanges', price: '9.50€', image: 'https://images.unsplash.com/photo-1599639957043-f3aa5c986398?w=400&h=400&fit=crop', description: 'Mélange marocain aux 15 épices', longDescription: 'Mélange complexe de 15 épices comprenant cardamome, cannelle, cumin, coriandre et bien d\'autres. Le secret des meilleurs tajines et couscous marocains.', origin: 'Maroc', weight: '60g' },
            { name: 'Cinq Épices Chinois', category: 'melanges', price: '7.90€', image: 'https://images.unsplash.com/photo-1608797178974-15b35a64ede9?w=400&h=400&fit=crop', description: 'Mélange traditionnel chinois équilibré', longDescription: 'Mélange harmonieux de badiane, poivre de Sichuan, fenouil, clou de girofle et cannelle. Équilibre parfait des cinq saveurs fondamentales de la cuisine chinoise.', origin: 'Chine', weight: '50g' },
            { name: 'Garam Masala', category: 'melanges', price: '8.50€', image: 'https://images.unsplash.com/photo-1596040033229-a0b3b6087c3e?w=400&h=400&fit=crop', description: 'Mélange indien chaud et aromatique', longDescription: 'Mélange d\'épices torréfiées typique de l\'Inde du Nord. Cardamome, cannelle, clous de girofle et poivre noir créent une symphonie de saveurs chaudes et épicées.', origin: 'Inde', weight: '60g' },

            // Herbes
            { name: 'Herbes de Provence', category: 'herbes', price: '5.90€', image: 'https://images.unsplash.com/photo-1583319445650-607ed51f96a8?w=400&h=400&fit=crop', description: 'Mélange traditionnel provençal', longDescription: 'Mélange authentique de thym, romarin, sarriette, origan et lavande. L\'essence de la Provence dans vos grillades, ratatouilles et plats méditerranéens.', origin: 'France (Provence)', weight: '40g' },
            { name: 'Basilic Séché', category: 'herbes', price: '4.90€', image: 'https://images.unsplash.com/photo-1618375569909-3c8616cf7733?w=400&h=400&fit=crop', description: 'Basilic italien parfumé', longDescription: 'Feuilles de basilic séchées conservant tout leur arôme. Indispensable pour vos sauces tomates, pizzas, pâtes et salades caprese.', origin: 'Italie', weight: '30g' },
            { name: 'Thym de Provence', category: 'herbes', price: '5.50€', image: 'https://images.unsplash.com/photo-1583319445650-607ed51f96a8?w=400&h=400&fit=crop', description: 'Thym sauvage de Provence', longDescription: 'Thym sauvage cueilli dans les collines de Provence. Parfum intense et authentique pour vos plats mijotés, grillades et infusions.', origin: 'France (Provence)', weight: '35g' },
            { name: 'Romarin Bio', category: 'herbes', price: '5.20€', image: 'https://images.unsplash.com/photo-1618375569909-3c8616cf7733?w=400&h=400&fit=crop', description: 'Romarin biologique méditerranéen', longDescription: 'Romarin bio cultivé sans pesticides dans le bassin méditerranéen. Notes résineuses et camphrées qui subliment agneau, poulet et pommes de terre.', origin: 'France', weight: '40g' }
        ];


        // Display product details
        function displayProductDetails() {
            if (!product) {
                document.getElementById('product-details').innerHTML = `
                    <div class="text-center py-12">
                        <h2 class="text-3xl font-bold text-stone-800 mb-4">Produit non trouvé</h2>
                        <a href="index.html" class="inline-block bg-amber-600 text-white px-6 py-3 rounded-lg hover:bg-amber-700 transition">
                            Retour à l'accueil
                        </a>
                    </div>
                `;
                return;
            }

            document.getElementById('product-details').innerHTML = `
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="grid lg:grid-cols-2 gap-8">
                        <div class="aspect-square h-full overflow-hidden bg-stone-100">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="p-8">
                            <div class="mb-4">
                                <span class="inline-block px-4 py-1 bg-amber-100 text-amber-700 rounded-full text-sm font-medium">
                                    ${getCategoryLabel(product.category)}
                                </span>
                            </div>
                            <h1 class="text-4xl font-bold text-stone-800 mb-4">${product.name}</h1>
                            <p class="text-3xl font-bold text-amber-600 mb-6">${product.price}</p>

                            <div class="space-y-4 mb-8">
                                <div>
                                    <h3 class="font-semibold text-stone-800 mb-2">Description</h3>
                                    <p class="text-stone-600 leading-relaxed">${product.longDescription}</p>
                                </div>

                                <div class="grid grid-cols-2 gap-4 pt-4 border-t border-stone-200">
                                    <div>
                                        <p class="text-sm text-stone-500">Origine</p>
                                        <p class="font-medium text-stone-800">${product.origin}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-stone-500">Poids</p>
                                        <p class="font-medium text-stone-800">${product.weight}</p>
                                    </div>
                                </div>
                            </div>

                            <div class="flex gap-4">
                                <button onclick="addToCart(${productId})" class="flex-1 bg-amber-600 text-white px-8 py-4 rounded-lg hover:bg-amber-700 transition font-semibold text-lg">
                                    Ajouter au panier
                                </button>
                                <a href="index.html" class="px-8 py-4 flex items-center border-2 border-stone-300 text-stone-700 rounded-lg hover:bg-stone-50 transition font-semibold text-lg">
                                    Retour
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Display related products
        function displayRelatedProducts() {
            const relatedProducts = products
                .filter(p => p.category === product.category && products.indexOf(p) !== productId)
                .slice(0, 4);

            if (relatedProducts.length === 0) {
                document.getElementById('related-products').innerHTML = `
                    <p class="col-span-full text-center text-stone-600">Aucun produit similaire disponible</p>
                `;
                return;
            }

            document.getElementById('related-products').innerHTML = relatedProducts.map(p => {
                const id = products.indexOf(p);
                return `
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition">
                        <div class="aspect-square overflow-hidden bg-stone-100">
                            <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover hover:scale-110 transition duration-500">
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-stone-800 mb-2">${p.name}</h3>
                            <p class="text-stone-600 text-sm mb-4">${p.description}</p>
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-2xl font-bold text-amber-600">${p.price}</span>
                            </div>
                            <div class="flex gap-2">
                                <a href="details.html?id=${id}" class="flex-1 text-center px-4 py-2 border border-amber-600 text-amber-600 rounded-lg hover:bg-amber-50 transition font-medium">
                                    Détails
                                </a>
                                <button onclick="addToCart(${id})" class="flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition font-medium">
                                    Ajouter
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Handle order submission
        document.addEventListener('DOMContentLoaded', () => {
            displayProductDetails();
            displayRelatedProducts();
            updateCartCount();

            const orderForm = document.getElementById('order-form');
            orderForm.addEventListener('submit', (e) => {
                e.preventDefault();

                const fullname = document.getElementById('fullname').value;
                const phone = document.getElementById('phone').value;
                const address = document.getElementById('address').value;

                const total = cart.reduce((sum, item) => {
                    const price = parseFloat(item.price.replace('€', '').replace(',', '.'));
                    return sum + (price * item.quantity);
                }, 0);

                const orderDetails = {
                    customer: { fullname, phone, address },
                    items: cart,
                    total: total.toFixed(2),
                    date: new Date().toISOString()
                };

                // Save order to localStorage
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                orders.push(orderDetails);
                localStorage.setItem('orders', JSON.stringify(orders));

                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();

                // Show success message
                alert(`Commande validée avec succès !\n\nMerci ${fullname} !\nTotal: ${total.toFixed(2)}€\n\nNous vous contacterons au ${phone} pour confirmer la livraison.`);

                // Reset form and close modal
                orderForm.reset();
                toggleCart();
            });
        });

        // Close cart on outside click
        document.getElementById('cart-modal').addEventListener('click', (e) => {
            if (e.target.id === 'cart-modal') {
                toggleCart();
            }
        });
    </script>
</body>
</html>
